## 2장에서 주로 다루는 내용
- 2의 제곱수
- 응답지연 값
- 가용성 수치

개략적인 규모 추정(back-of-the-envelop estimation)은 보편적으로 사용되는 수치로 사고 실험을 행하여 추정치를 계산하는 행위로서, 어떤 설계가 요구사항에 부합할 것인지 보기위한 것이다.
## 2의 제곱수
분산 시스템에서는 다루는 데이터 양은 엄청나게 커질 수 있으나 그 계산법은 기본을 크게 벗어나지 않는다. 우선 데이터 볼륨의 크기를 2의 제곱수로 표현하는 방법을 알아야 한다.

| 2의 제곱      | 근사치                   | 이름      | 축약형 |
| ---------- | --------------------- | ------- | --- |
| 10 (10^3)  | 1,000                 | 1 킬로바이트 | 1KB |
| 20 (10^6)  | 1,000,000             | 1 메가바이트 | 1MB |
| 30 (10^9)  | 1,000,000,000         | 1 기가바이트 | 1GB |
| 40 (10^12) | 1,000,000,000,000     | 1 테라바이트 | 1TB |
| 50 (10^15) | 1,000,000,000,000,000 | 1 페타바이트 | 1PB |
## 응답지연 값
| 연산명                         | 시간                  |
| --------------------------- | ------------------- |
| L1 캐시 참조                    | 0.5ns               |
| 분기 예측 오류(branch mispredict) | 5ns                 |
| L2 캐시 참조                    | 7ns                 |
| 뮤텍스(mutex) 락/언락             | 100ns               |
| 주 메모리 참조                    | 100ns               |
| Zippy로 1KB 압축               | 10,000ns = 10us     |
| 1Gbps 네트워크로 2KB 전송          | 20,000ns = 20us     |
| 메모리에서 1MB 순차적으로 read        | 250,000ns = 250us   |
| 같은 데이터 센터 내에서 메시지 왕복 지연시간   | 500,000ns = 500us   |
| 디스크 탐색(seek)                | 10,000,000ns = 10ms |
| 네트워크에서 1MB 순차적으로 read       | 10,000,000ns = 10ms |
| 디스크에서 1MB 순차적으로 read        | 30,000,000ns = 30ms |
위 표는 컴퓨터 성능에 따라 달라 질 수 있으며, 수치들을 분석하면 다음과 같은 결론이 나온다.
- 메모리는 빠르지만 디스크는 느리다. 그렇기 때문에 디스크 탐색(seek)은 가능한 피해라.
- 단순한 압축 알고리즘은 빠르기 때문에 네트워크로 데이터를 전송 시 압축할 수 있으면 압축하자.
- 데이터 센터는 보통 여러 region에 분산되어 있기 때문에, 센터 간 데이터를 주고 받는 데는 시간이 걸린다.
## 가용성 수치
고가용성(high availavility)은 시스템이 오랜 시간 동안 지속적으로 중단 없이 운영될 수 있는 것을 말한다. 대부분의 서비스는 99 ~ 100% 사이의 값을 갖는다.

| 가용률      | 하루당 장애시간  | 주당 장애시간   | 개월당 장애시간 | 연간 장애시간 |
| -------- | --------- | --------- | -------- | ------- |
| 99%      | 14.40분    | 1.68시간    | 7.31시간   | 3.65일   |
| 99.9%    | 1.44분     | 10.08분    | 43.83분   | 8.77시간  |
| 99.99%   | 8.64초     | 1.01분     | 4.38분    | 52.60분  |
| 99.999%  | 864.00밀리초 | 6.05초     | 26.30초   | 5.26분   |
| 99.9999% | 86.4밀리초   | 604.80밀리초 | 2.63초    | 31.56초  |
